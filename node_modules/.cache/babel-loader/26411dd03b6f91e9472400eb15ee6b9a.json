{"ast":null,"code":"var _jsxFileName = \"/Users/chintansawla/Documents/GitHub/personal-website/src/components/ForceGraph.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst strokeColors = {\n  \"#d50000\": \"#ef9a9a\",\n  \"#f57c00\": \"#ffb74d\",\n  \"#e91e63\": \"#f48fb1\",\n  \"#36B06F\": \"#81c784\",\n  \"#6250F4\": \"#b39ddb\",\n  \"#2979ff\": \"#82b1ff\",\n  \"#E7B92F\": \"#fff59d\",\n  \"#757575\": \"#363636\"\n};\n\nconst drag = simulation => {\n  const dragStarted = event => {\n    if (!event.active) simulation.alphaTarget(0.3).restart();\n    event.subject.fx = event.subject.x;\n    event.subject.fy = event.subject.y;\n  };\n\n  const dragged = event => {\n    event.subject.fx = event.x;\n    event.subject.fy = event.y;\n  };\n\n  const dragEnded = event => {\n    if (!event.active) simulation.alphaTarget(0);\n    event.subject.fx = null;\n    event.subject.fy = null;\n  };\n\n  return d3.drag().on(\"start\", dragStarted).on(\"drag\", dragged).on(\"end\", dragEnded);\n};\n\nexport const ForceGraph = _ref => {\n  _s();\n\n  let {\n    data,\n    accentColor,\n    linkRef,\n    projectRef\n  } = _ref;\n  const svgRef = useRef(null);\n  const nodes = data.nodes;\n  const links = data.links;\n  const height = 600;\n  const width = \"100vw\";\n  useEffect(() => {\n    if (svgRef.current) {\n      const svg = d3.select(svgRef.current).attr(\"width\", width).attr(\"height\", height);\n      const simulation = d3.forceSimulation(nodes).force(\"charge\", d3.forceManyBody().strength(-600)).force(\"link\", d3.forceLink(links)).force(\"center\", d3.forceCenter(300, 300));\n      const lines = svg.selectAll(\"line\").data(links).join(\"line\").attr(\"stroke\", \"#ef9a9a\").attr(\"stroke-width\", 3).on(\"mouseenter\", (evt, d) => {\n        lines.attr(\"display\", \"none\").filter(l => l.size === d.size).attr(\"display\", \"block\");\n\n        if (linkRef.current) {\n          d3.select(linkRef.current).attr(\"xlink:href\", d.href);\n        }\n\n        if (projectRef.current) {\n          d3.select(projectRef.current).html(d.title);\n        }\n      }).on(\"mouseleave\", evt => {\n        lines.attr(\"display\", \"block\");\n\n        if (linkRef.current) {\n          d3.select(linkRef.current).attr(\"xlink:href\", \"https://github.com/sawlachintan\");\n        }\n\n        if (projectRef.current) {\n          d3.select(projectRef.current).html(\"GitHub Repo\");\n        }\n      }); // .attr(\"stroke-width\", (d) => d.size);\n\n      const circles = svg.selectAll(\"circle\").data(nodes).join(\"circle\").attr(\"fill\", \"#d50000\").attr(\"r\", 20).call(drag(simulation));\n      const text = svg.selectAll(\"text\").data(nodes).enter().append(\"text\").text(d => d.id).attr(\"fill\", \"#fff\").attr(\"text-anchor\", \"middle\").attr(\"alignment-baseline\", \"middle\").attr(\"font-size\", \"1rem\").attr(\"user-select\", \"none\");\n      simulation.on(\"tick\", () => {\n        console.log(\"tick\");\n        lines.attr(\"x1\", link => link.source.x).attr(\"y1\", link => link.source.y).attr(\"x2\", link => link.target.x).attr(\"y2\", link => link.target.y);\n        circles.attr(\"cx\", node => node.x).attr(\"cy\", node => node.y);\n        text.attr(\"x\", node => node.x).attr(\"y\", node => node.y);\n      });\n    }\n  }, [links, nodes, linkRef, projectRef]);\n  useEffect(() => {\n    if (svgRef.current) {\n      const svg = d3.select(svgRef.current);\n      svg.selectAll(\"circle\").transition().duration(650).ease(d3.easeCubicInOut).attr(\"fill\", accentColor);\n      svg.selectAll(\"line\").transition().duration(650).ease(d3.easeCubicInOut).attr(\"stroke\", strokeColors[accentColor]);\n    }\n  }, [accentColor]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(ForceGraph, \"xZvsc6Dl8WHAXhRrVyhrxei3QC0=\");\n\n_c = ForceGraph;\n\nvar _c;\n\n$RefreshReg$(_c, \"ForceGraph\");","map":{"version":3,"sources":["/Users/chintansawla/Documents/GitHub/personal-website/src/components/ForceGraph.js"],"names":["useEffect","useRef","d3","strokeColors","drag","simulation","dragStarted","event","active","alphaTarget","restart","subject","fx","x","fy","y","dragged","dragEnded","on","ForceGraph","data","accentColor","linkRef","projectRef","svgRef","nodes","links","height","width","current","svg","select","attr","forceSimulation","force","forceManyBody","strength","forceLink","forceCenter","lines","selectAll","join","evt","d","filter","l","size","href","html","title","circles","call","text","enter","append","id","console","log","link","source","target","node","transition","duration","ease","easeCubicInOut"],"mappings":"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","sourcesContent":["import { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nconst strokeColors = {\n  \"#d50000\": \"#ef9a9a\",\n  \"#f57c00\": \"#ffb74d\",\n  \"#e91e63\": \"#f48fb1\",\n  \"#36B06F\": \"#81c784\",\n  \"#6250F4\": \"#b39ddb\",\n  \"#2979ff\": \"#82b1ff\",\n  \"#E7B92F\": \"#fff59d\",\n  \"#757575\": \"#363636\",\n};\n\nconst drag = (simulation) => {\n  const dragStarted = (event) => {\n    if (!event.active) simulation.alphaTarget(0.3).restart();\n    event.subject.fx = event.subject.x;\n    event.subject.fy = event.subject.y;\n  };\n  const dragged = (event) => {\n    event.subject.fx = event.x;\n    event.subject.fy = event.y;\n  };\n  const dragEnded = (event) => {\n    if (!event.active) simulation.alphaTarget(0);\n    event.subject.fx = null;\n    event.subject.fy = null;\n  };\n\n  return d3\n    .drag()\n    .on(\"start\", dragStarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragEnded);\n};\n\nexport const ForceGraph = ({ data, accentColor, linkRef, projectRef }) => {\n  const svgRef = useRef(null);\n  const nodes = data.nodes;\n  const links = data.links;\n  const height = 600;\n  const width = \"100vw\";\n\n  useEffect(() => {\n    if (svgRef.current) {\n      const svg = d3\n        .select(svgRef.current)\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n\n      const simulation = d3\n        .forceSimulation(nodes)\n        .force(\"charge\", d3.forceManyBody().strength(-600))\n        .force(\"link\", d3.forceLink(links))\n        .force(\"center\", d3.forceCenter(300, 300));\n\n      const lines = svg\n        .selectAll(\"line\")\n        .data(links)\n        .join(\"line\")\n        .attr(\"stroke\", \"#ef9a9a\")\n        .attr(\"stroke-width\", 3)\n        .on(\"mouseenter\", (evt, d) => {\n          lines\n            .attr(\"display\", \"none\")\n            .filter((l) => l.size === d.size)\n            .attr(\"display\", \"block\");\n          if (linkRef.current) {\n            d3.select(linkRef.current).attr(\"xlink:href\", d.href);\n          }\n          if (projectRef.current) {\n            d3.select(projectRef.current).html(d.title);\n          }\n        })\n        .on(\"mouseleave\", (evt) => {\n          lines.attr(\"display\", \"block\");\n          if (linkRef.current) {\n            d3.select(linkRef.current).attr(\n              \"xlink:href\",\n              \"https://github.com/sawlachintan\"\n            );\n          }\n          if (projectRef.current) {\n            d3.select(projectRef.current).html(\"GitHub Repo\");\n          }\n        });\n      // .attr(\"stroke-width\", (d) => d.size);\n\n      const circles = svg\n        .selectAll(\"circle\")\n        .data(nodes)\n        .join(\"circle\")\n        .attr(\"fill\", \"#d50000\")\n        .attr(\"r\", 20)\n        .call(drag(simulation));\n\n      const text = svg\n        .selectAll(\"text\")\n        .data(nodes)\n        .enter()\n        .append(\"text\")\n        .text((d) => d.id)\n        .attr(\"fill\", \"#fff\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"alignment-baseline\", \"middle\")\n        .attr(\"font-size\", \"1rem\")\n        .attr(\"user-select\", \"none\");\n\n      simulation.on(\"tick\", () => {\n        console.log(\"tick\");\n\n        lines\n          .attr(\"x1\", (link) => link.source.x)\n          .attr(\"y1\", (link) => link.source.y)\n          .attr(\"x2\", (link) => link.target.x)\n          .attr(\"y2\", (link) => link.target.y);\n\n        circles.attr(\"cx\", (node) => node.x).attr(\"cy\", (node) => node.y);\n\n        text.attr(\"x\", (node) => node.x).attr(\"y\", (node) => node.y);\n      });\n    }\n  }, [links, nodes, linkRef, projectRef]);\n\n  useEffect(() => {\n    if (svgRef.current) {\n      const svg = d3.select(svgRef.current);\n\n      svg\n        .selectAll(\"circle\")\n        .transition()\n        .duration(650)\n        .ease(d3.easeCubicInOut)\n        .attr(\"fill\", accentColor);\n      svg\n        .selectAll(\"line\")\n        .transition()\n        .duration(650)\n        .ease(d3.easeCubicInOut)\n        .attr(\"stroke\", strokeColors[accentColor]);\n    }\n  }, [accentColor]);\n  return (\n    <>\n      <svg ref={svgRef}></svg>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}