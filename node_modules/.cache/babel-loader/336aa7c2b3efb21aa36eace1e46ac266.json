{"ast":null,"code":"import{useEffect,useRef}from\"react\";import*as d3 from\"d3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var strokeColors={\"#d50000\":\"#ef9a9a\",\"#f57c00\":\"#ffb74d\",\"#e91e63\":\"#f48fb1\",\"#36B06F\":\"#81c784\",\"#6250F4\":\"#b39ddb\",\"#2979ff\":\"#82b1ff\",\"#E7B92F\":\"#fff59d\",\"#757575\":\"#363636\"};var drag=function drag(simulation){var dragStarted=function dragStarted(event){if(!event.active)simulation.alphaTarget(0.3).restart();event.subject.fx=event.subject.x;event.subject.fy=event.subject.y;};var dragged=function dragged(event){event.subject.fx=event.x;event.subject.fy=event.y;};var dragEnded=function dragEnded(event){if(!event.active)simulation.alphaTarget(0);event.subject.fx=null;event.subject.fy=null;};return d3.drag().on(\"start\",dragStarted).on(\"drag\",dragged).on(\"end\",dragEnded);};export var ForceGraph=function ForceGraph(_ref){var data=_ref.data,accentColor=_ref.accentColor,linkRef=_ref.linkRef,projectRef=_ref.projectRef;var svgRef=useRef(null);var nodes=data.nodes;var links=data.links;var height=600;var width=\"100vw\";useEffect(function(){if(svgRef.current){var svg=d3.select(svgRef.current).attr(\"width\",width).attr(\"height\",height);var simulation=d3.forceSimulation(nodes).force(\"charge\",d3.forceManyBody().strength(-600)).force(\"link\",d3.forceLink(links)).force(\"center\",d3.forceCenter(300,300));var lines=svg.selectAll(\"line\").data(links).join(\"line\").attr(\"stroke\",\"#ef9a9a\").attr(\"stroke-width\",3).on(\"mouseenter\",function(evt,d){lines.attr(\"display\",\"none\").filter(function(l){return l.size===d.size;}).attr(\"display\",\"block\");if(linkRef.current){d3.select(linkRef.current).attr(\"xlink:href\",d.href);}if(projectRef.current){d3.select(projectRef.current).html(d.title);}}).on(\"mouseleave\",function(evt){lines.attr(\"display\",\"block\");if(linkRef.current){d3.select(linkRef.current).attr(\"xlink:href\",\"https://github.com/sawlachintan\");}if(projectRef.current){d3.select(projectRef.current).html(\"GitHub Repo\");}});// .attr(\"stroke-width\", (d) => d.size);\nvar circles=svg.selectAll(\"circle\").data(nodes).join(\"circle\").attr(\"fill\",\"#d50000\").attr(\"r\",20).call(drag(simulation));var text=svg.selectAll(\"text\").data(nodes).enter().append(\"text\").text(function(d){return d.id;}).attr(\"fill\",\"#fff\").attr(\"text-anchor\",\"middle\").attr(\"alignment-baseline\",\"middle\").attr(\"font-size\",\"1rem\").attr(\"user-select\",\"none\");simulation.on(\"tick\",function(){console.log(\"tick\");lines.attr(\"x1\",function(link){return link.source.x;}).attr(\"y1\",function(link){return link.source.y;}).attr(\"x2\",function(link){return link.target.x;}).attr(\"y2\",function(link){return link.target.y;});circles.attr(\"cx\",function(node){return node.x;}).attr(\"cy\",function(node){return node.y;});text.attr(\"x\",function(node){return node.x;}).attr(\"y\",function(node){return node.y;});});}},[links,nodes,linkRef,projectRef]);useEffect(function(){if(svgRef.current){var svg=d3.select(svgRef.current);svg.selectAll(\"circle\").transition().duration(650).ease(d3.easeCubicInOut).attr(\"fill\",accentColor);svg.selectAll(\"line\").transition().duration(650).ease(d3.easeCubicInOut).attr(\"stroke\",strokeColors[accentColor]);}},[accentColor]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"svg\",{ref:svgRef})});};","map":{"version":3,"sources":["/Users/chintansawla/Documents/GitHub/personal-website/src/components/ForceGraph.js"],"names":["useEffect","useRef","d3","strokeColors","drag","simulation","dragStarted","event","active","alphaTarget","restart","subject","fx","x","fy","y","dragged","dragEnded","on","ForceGraph","data","accentColor","linkRef","projectRef","svgRef","nodes","links","height","width","current","svg","select","attr","forceSimulation","force","forceManyBody","strength","forceLink","forceCenter","lines","selectAll","join","evt","d","filter","l","size","href","html","title","circles","call","text","enter","append","id","console","log","link","source","target","node","transition","duration","ease","easeCubicInOut"],"mappings":"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","sourcesContent":["import { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\n\nconst strokeColors = {\n  \"#d50000\": \"#ef9a9a\",\n  \"#f57c00\": \"#ffb74d\",\n  \"#e91e63\": \"#f48fb1\",\n  \"#36B06F\": \"#81c784\",\n  \"#6250F4\": \"#b39ddb\",\n  \"#2979ff\": \"#82b1ff\",\n  \"#E7B92F\": \"#fff59d\",\n  \"#757575\": \"#363636\",\n};\n\nconst drag = (simulation) => {\n  const dragStarted = (event) => {\n    if (!event.active) simulation.alphaTarget(0.3).restart();\n    event.subject.fx = event.subject.x;\n    event.subject.fy = event.subject.y;\n  };\n  const dragged = (event) => {\n    event.subject.fx = event.x;\n    event.subject.fy = event.y;\n  };\n  const dragEnded = (event) => {\n    if (!event.active) simulation.alphaTarget(0);\n    event.subject.fx = null;\n    event.subject.fy = null;\n  };\n\n  return d3\n    .drag()\n    .on(\"start\", dragStarted)\n    .on(\"drag\", dragged)\n    .on(\"end\", dragEnded);\n};\n\nexport const ForceGraph = ({ data, accentColor, linkRef, projectRef }) => {\n  const svgRef = useRef(null);\n  const nodes = data.nodes;\n  const links = data.links;\n  const height = 600;\n  const width = \"100vw\";\n\n  useEffect(() => {\n    if (svgRef.current) {\n      const svg = d3\n        .select(svgRef.current)\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n\n      const simulation = d3\n        .forceSimulation(nodes)\n        .force(\"charge\", d3.forceManyBody().strength(-600))\n        .force(\"link\", d3.forceLink(links))\n        .force(\"center\", d3.forceCenter(300, 300));\n\n      const lines = svg\n        .selectAll(\"line\")\n        .data(links)\n        .join(\"line\")\n        .attr(\"stroke\", \"#ef9a9a\")\n        .attr(\"stroke-width\", 3)\n        .on(\"mouseenter\", (evt, d) => {\n          lines\n            .attr(\"display\", \"none\")\n            .filter((l) => l.size === d.size)\n            .attr(\"display\", \"block\");\n          if (linkRef.current) {\n            d3.select(linkRef.current).attr(\"xlink:href\", d.href);\n          }\n          if (projectRef.current) {\n            d3.select(projectRef.current).html(d.title);\n          }\n        })\n        .on(\"mouseleave\", (evt) => {\n          lines.attr(\"display\", \"block\");\n          if (linkRef.current) {\n            d3.select(linkRef.current).attr(\n              \"xlink:href\",\n              \"https://github.com/sawlachintan\"\n            );\n          }\n          if (projectRef.current) {\n            d3.select(projectRef.current).html(\"GitHub Repo\");\n          }\n        });\n      // .attr(\"stroke-width\", (d) => d.size);\n\n      const circles = svg\n        .selectAll(\"circle\")\n        .data(nodes)\n        .join(\"circle\")\n        .attr(\"fill\", \"#d50000\")\n        .attr(\"r\", 20)\n        .call(drag(simulation));\n\n      const text = svg\n        .selectAll(\"text\")\n        .data(nodes)\n        .enter()\n        .append(\"text\")\n        .text((d) => d.id)\n        .attr(\"fill\", \"#fff\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"alignment-baseline\", \"middle\")\n        .attr(\"font-size\", \"1rem\")\n        .attr(\"user-select\", \"none\");\n\n      simulation.on(\"tick\", () => {\n        console.log(\"tick\");\n\n        lines\n          .attr(\"x1\", (link) => link.source.x)\n          .attr(\"y1\", (link) => link.source.y)\n          .attr(\"x2\", (link) => link.target.x)\n          .attr(\"y2\", (link) => link.target.y);\n\n        circles.attr(\"cx\", (node) => node.x).attr(\"cy\", (node) => node.y);\n\n        text.attr(\"x\", (node) => node.x).attr(\"y\", (node) => node.y);\n      });\n    }\n  }, [links, nodes, linkRef, projectRef]);\n\n  useEffect(() => {\n    if (svgRef.current) {\n      const svg = d3.select(svgRef.current);\n\n      svg\n        .selectAll(\"circle\")\n        .transition()\n        .duration(650)\n        .ease(d3.easeCubicInOut)\n        .attr(\"fill\", accentColor);\n      svg\n        .selectAll(\"line\")\n        .transition()\n        .duration(650)\n        .ease(d3.easeCubicInOut)\n        .attr(\"stroke\", strokeColors[accentColor]);\n    }\n  }, [accentColor]);\n  return (\n    <>\n      <svg ref={svgRef}></svg>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}